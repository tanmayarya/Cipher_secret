<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Online IDE</title>
	<link rel='stylesheet prefetch' href='https://cdn.jsdelivr.net/foundation/5.5.0/css/foundation.css'>
	<link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css'>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

	<link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'>
	<link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/css/bootstrap-select.css'>

<script type="text/javascript">
  noty({text: 'Welcome to the IDE', type: 'success', timeout: 3500, progressBar: true});
</script>

<style media="screen">
	nav {
		position: relative;
		text-align: center;

	}
	nav > ul {
		list-style: none;
		padding: 0;
		margin: 0;
		display: inline-block;
		background: rgba(237,37,83,1);
		position: relative;
		border-radius: 5px;
		color: white;
	}

	nav > ul > li {
		position: relative;
		float: left;
		width: 422px;
		height: 65px;
		line-height: 65px;
		position: relative;

		text-transform: uppercase;
		font-size: 14px;
		color: rgba(0, 0, 0, 0.7);
		cursor: pointer;
		opacity: 1 !important;
	}
	nav > ul > li:hover {
		background: rgba(237,37,83,0.7);
		border-radius: 5px;

		opacity: 1 !important;
	}

	ul.drop-menu {
		position: absolute;
		z-index: 9999;
		top: 100%;
		left: -12.7px;
		width: 100%;
		padding: 0;
		opacity: 1 !important;

	}
	ul.drop-menu li {
		background: rgba(237,37,83,0.9);
		color: rgba(255, 255, 255, 1);
		padding: 20px;

	}
	ul.drop-menu li:hover {
		background: rgba(237,37,83,1);
		opacity: 1 !important;
	}
	ul.drop-menu li:last-child {
		border-radius: 0 0 5px 5px;
	}

	ul.drop-menu li {
		display: none;
	}
	li:hover > ul.drop-menu li {
		display: block;
	}
	li:hover .drop-menu.menu-4 {
		-webkit-perspective: 1000px;
		perspective: 1000px;
		-webkit-transform-origin: top right;
		transform-origin: top right;
	}
	li:hover .drop-menu.menu-4 li {
		opacity: 0;
	}
	li:hover .drop-menu.menu-4 li:nth-child(1) {
		-webkit-animation-name: menu4;
		animation-name: menu4;
		-webkit-animation-duration: 300ms;
		animation-duration: 300ms;
		-webkit-animation-delay: -150ms;
		animation-delay: -150ms;
		-webkit-animation-timing-function: ease-in-out;
		animation-timing-function: ease-in-out;
		-webkit-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}
	li:hover .drop-menu.menu-4 li:nth-child(2) {
		-webkit-animation-name: menu4;
		animation-name: menu4;
		-webkit-animation-duration: 300ms;
		animation-duration: 300ms;
		-webkit-animation-delay: 0;
		animation-delay: 0;
		-webkit-animation-timing-function: ease-in-out;
		animation-timing-function: ease-in-out;
		-webkit-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}
	li:hover .drop-menu.menu-4 li:nth-child(3) {
		-webkit-animation-name: menu4;
		animation-name: menu4;
		-webkit-animation-duration: 300ms;
		animation-duration: 300ms;
		-webkit-animation-delay: 150ms;
		animation-delay: 150ms;
		-webkit-animation-timing-function: ease-in-out;
		animation-timing-function: ease-in-out;
		-webkit-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}
	li:hover .drop-menu.menu-4 li:nth-child(4) {
		-webkit-animation-name: menu4;
		animation-name: menu4;
		-webkit-animation-duration: 300ms;
		animation-duration: 300ms;
		-webkit-animation-delay: 300ms;
		animation-delay: 300ms;
		-webkit-animation-timing-function: ease-in-out;
		animation-timing-function: ease-in-out;
		-webkit-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}
	li:hover .drop-menu.menu-4 li:nth-child(5) {
		-webkit-animation-name: menu4;
		animation-name: menu4;
		-webkit-animation-duration: 300ms;
		animation-duration: 300ms;
		-webkit-animation-delay: 450ms;
		animation-delay: 450ms;
		-webkit-animation-timing-function: ease-in-out;
		animation-timing-function: ease-in-out;
		-webkit-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}
	li:hover .drop-menu.menu-4 li:nth-child(6) {
		-webkit-animation-name: menu4;
		animation-name: menu4;
		-webkit-animation-duration: 300ms;
		animation-duration: 300ms;
		-webkit-animation-delay: 600ms;
		animation-delay: 600ms;
		-webkit-animation-timing-function: ease-in-out;
		animation-timing-function: ease-in-out;
		-webkit-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}
	@-webkit-keyframes menu4 {
		0% {
			opacity: 0;
			-webkit-transform: rotate(-30deg) translateX(30px);
			transform: rotate(-30deg) translateX(30px);
		}
		100% {
			opacity: 1;
			-webkit-transform: rotate(0deg) translateY(0px);
			transform: rotate(0deg) translateY(0px);
		}
	}
	@keyframes menu4 {
		0% {
			opacity: 0;
			-webkit-transform: rotate(-30deg) translateX(30px);
			transform: rotate(-30deg) translateX(30px);
		}
		100% {
			opacity: 1;
			-webkit-transform: rotate(0deg) translateY(0px);
			transform: rotate(0deg) translateY(0px);
		}
	}

</style>


<style media="screen">
.cards {
	display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	-ms-flex-wrap: wrap;
	flex-wrap: wrap;
	-webkit-box-align: start;
	-ms-flex-align: start;
	justify-content: center;
	align-items: flex-start;
}

.card {
	font-family: Helvetica;
	position: relative;
	margin: 1em;
	box-shadow: -5px 0.25em 55px -10px #999;
	overflow: hidden;
	-webkit-box-flex: 1;
	-ms-flex: 1 0 calc(300px - 2em);
	flex: 5 0 calc(300px - 2em);
	display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	-ms-flex-wrap: wrap;
	flex-wrap: wrap;
}
.card2 {
	font-family: Helvetica;
	position: relative;
	margin: 1em;
	height: 260px;
	box-shadow: -5px 0.25em 55px -10px #999;
	overflow: hidden;
	-webkit-box-flex: 1;
	-ms-flex: 1 0 calc(300px - 2em);
	flex: 1 0 calc(300px - 2em);
	display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	-ms-flex-wrap: wrap;
	flex-wrap: wrap;
}
.card__image {
	background-color: #000;
	background-position: center center;
	background-size: cover;
	-webkit-box-flex: 1;
	-ms-flex: 1 0 33%;
	flex: 1 0 33%;
	min-height: 150px;
	min-width: 150px;
}
.card__title {
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}
.card__content {
	padding: 1em 1em 3em;
	-webkit-box-flex: 1;
	-ms-flex: 1 1 67%;
	flex: 1 1 67%;
	position: relative;
	overflow: hidden;
}
.card__label {
	border-top: 3px solid currentColor;
	padding: 0.2em 1em;
	position: absolute;
	font-variant: small-caps;
	text-transform: lowercase;
	left: 0;
	right: 0;
	top: 0;
}
.card__label--food {
	color: #f00;
}
.card__label--tech {
	color: #00f;
}
.card__text {
	height: 85px;
	overflow: hidden;
	position: relative;
}
.card__text::after {
	content: '';
	background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0) 0%, white 100%);
	background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, white 100%);
	height: 15px;
	width: 100%;
	position: absolute;
	bottom: 0;
	left: 0;
}
.card__button {
	position: absolute;
	bottom: 1em;
	right: 1em;
	width: 75px;
	height: 40px;
	font-size: 20px;
	font-weight: bold;

}

.button {
	display: inline-block;
	color: white;
	padding: 0.5em 2em 0.5em 1em;
	border-radius: 0.25em;
	text-decoration: none;
	background-color: rgba(237,37,83,1);
}
.button::after {
	content: '';
	display: inline-block;
	border: solid currentColor;
	border-width: 0.2em 0.2em 0 0;
	margin-left: 0.5em;
	width: 0.5em;
	height: 0.5em;
	-webkit-transform: translateY(-50%) translateX(-2em) rotate(45deg);
	transform: translateY(-50%) translateX(-2em) rotate(45deg);
	position: absolute;
	top: 50%;
	left: 100%;
	-webkit-transition: all ease 200ms;
	transition: all ease 200ms;
}
.button:hover::after {
	margin-left: 1em;
}

</style>
<style media="screen">
#custominput {
	height: 60px;
	font-size: 28px;
}

</style>
<style media="screen">
#editor {
	margin: 0;
	width: 944px;
	height: 38em;
	margin-top: 5px;
	font-size: 14px;
}

/*Compile Button CSS*/

.btn {
	margin: 4px;
	box-shadow: 1px 1px 5px #888888;
}

.btn-sky {
	color: #000;
	background-color: #000;
	border-bottom: 2px solid #098aa9;
}
.btn-sky.active:focus,
.btn-sky:focus,
.btn-sky:hover {
	color: #fff;
	background-color: #29b6d8;
	border-bottom: 2px solid #2192ad;
	outline: none;
}
.btn-sky.active,
.btn-sky:active {
	color: #fff;
	background-color: #0a97b9;
	border-top: 2px solid #087994;
	outline-offset: none;
	margin-top: 2px;
}
.btn-sky.active:focus {
	color: #fff;
	background-color: #df6a78;
	border-bottom: 2px solid #b25560;
	outline: none;
}
.btn.active:focus,
.btn:active:focus,
.btn:focus {
	outline: none;
	outline-offset: 0;
}

/*Compile Button CSS End*/

.col-md-12.col-sm-12.codeSide {
	/*background: #272822;*/
	height: 40em;
	/*padding-left: 21px;*/
	border-radius: 10px;
	padding-top: 0;

}

.ace_gutter {
	min-width: 50px;
}

.ace_scroller {
	margin-left: 5px;
}

input#compile {
	margin-top: 5px;
	float: right;
}

/*Language Select CSS */
button.btn.dropdown-toggle.btn-default {
	width: 42%;
	margin: 4px 2px 6px 4px;
}
#source {
	position: absolute;
	display: none;
}
#format {

	display: none;
}
.outer{
  display: flex;
  flex-flow: column;
}

.result{
	font-size: 25px;
	/*font-weight: bold;*/
}
#custom{
	font-weight: bold;
	color: White;
	font-size: 25px;
}
</style>

</head>
<body>
	<nav >
		<ul>
			<li><%= link_to "Home", landing_index_path ,:id=>"custom"%></strong>

			</li>
			<li><%= link_to "Discussion", landing_index_path ,:id=>"custom"%></strong>
				<ul class="drop-menu menu-4">
					<li>uno</li>
					<li>dos</li>
					<li>tres</li>
					<li>cuatro</li>
					<li>cinco</li>
					<li>seis</li>
				</ul>
			</li>
			<li><%= link_to "Practice", questions_path ,:id=>"custom"%></strong>
				<ul class="drop-menu menu-4">
					<li>uno</li>
					<li>dos</li>
					<li>tres</li>
					<li>cuatro</li>
					<li>cinco</li>
					<li>seis</li>
				</ul>
			</li>
			<%if user_signed_in?%>
			<li><%= link_to "Logout", destroy_user_session_path ,method: :delete,:id=>"custom"%></strong>
				<%else%>
				<li><%= link_to "Sign In", new_user_session_path ,method: :get,:id=>"custom"%></strong>
					<%end%>
				</li>
			</ul>
		</nav>
		<br><br>
		<%= form_tag '/ideevaluate',remote: true do %>
		<div class="cards">
			<div class="card">

				<div class="card__content">
					<div class="container">
						<div class="row">
							<div class="col-md-12 col-sm-12 codeSide">
								<div class="row">
									<div class="col-md-12 col-sm-12">
										<div class="compile-code">
											<select class="selectpicker" data-live-search="true" class="form-control" id="theme" onchange="changeMode1()">
												<option value="monokai" id="monokai" selected>monokai</option>
												<option value="dawn" id="dawn" selected>dawn</option>
												<option value="eclipse" id="eclipse">eclipse</option>
												<option value="merbivore" id="merbivore">merbivore</option>
												<option value="chaos" id="chaos">chaos</option>
											</select>
											<%= select_tag 'lang', options_for_select(@names.collect{ |key,value| [value, @codes[key]] }),onchange:'changeMode()',:class=>"selectpicker",data: { live_search: 'true' } %>

											<pre name="code" id="editor" style="border: none;"></pre>
										</div>

									</div>
								</div>
							</div>

						</div>

					</div>

				</div>
			</div>
      <div class="outer">


			<div class="card2">

				<div class="card__content">

					<h1 class="card__title">Input</h1>
					<h4>Enter Your Custom Input Here!!</h4>
					<%= text_field_tag 'testcases',nil,:id=>"custominput"%><br>



					<button type="button" name="button" type="submit" class="button" style="height:40px;font-size:20px;margin-bottom:-202px;" onclick='doDL(document.getElementById("source").value)'>Save</button>
					<%= submit_tag 'Run' ,:class=>"card__button button but"%></div>
					<!-- <a class="card__button button" href="#">Run</a> -->


			</div>
      <div class="card2">

				<div class="card__content">

					<h1 class="card__title">Output</h1>
					<div class="result">

					</div>
				</div>

			</div>
      </div>
			<%= text_area_tag 'source'%>
			<%= hidden_field_tag 'format', "JSON" %>
			<%= hidden_field_tag 'api_key','hackerrank|2357374-1588|c8cb820f84f230248f9117b777b64f017d2cad2f' %>
			<%end%>

			<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
			<script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
			<script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/js/bootstrap-select.js'></script>
			<script src='https://ajaxorg.github.io/ace-builds/src-min-noconflict/ace.js'></script>
			<script type="text/javascript">
// Editor Settings (Provided by C9)
var editor = ace.edit("editor");
editor.setTheme("ace/theme/dawn");
editor.setShowPrintMargin(false);
editor.setFontSize(20);
editor.session.setMode("ace/mode/c_cpp");
editor.setValue("#include <stdio.h>\n\n\nint main() {\n    // Complete the code.\n    return 0;\n}\n");
editor.clearSelection();

// Function to change the mode of the editor as a different language is selected dynamically
function changeMode() {
	var x = document.getElementById("lang");
	var modeV = x.options[x.selectedIndex];
	var modeValue = modeV.getAttribute('value')
	if (modeValue == "1") {
		editor.session.setMode("ace/mode/c_cpp");
		editor.setValue("#include <stdio.h>\n\n\nint main() {\n    // Complete the code.\n    return 0;\n}\n");
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "c";
	}
	if (modeValue == "2") {
		editor.session.setMode("ace/mode/c_cpp");
		editor.setValue("#include <iostream>\nusing namespace std;\n\nint main() {\n    // Complete the code.\n    return 0;\n}\n");
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "cpp";
	}
	if (modeValue == "9") {
		editor.session.setMode("ace/mode/c#");
		editor.setValue("using System;\nusing System.Collections.Generic;\nusing System.IO;\n\nclass Solution {\n   static void Main(String[] args) {\n // Complete the code.\n\n}\n}\n");

		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "c#";
	}
	if (modeValue == "12") {
		editor.session.setMode("ace/mode/haskell");
		editor.setValue("import Control.Applicative\nimport Control.Monad\nimport System.IO\n\nmain :: IO ()\nmain = do\n");
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "haskell";
	}
	if (modeValue == "3" || modeValue == "43") {
		editor.session.setMode("ace/mode/java");
		editor.setValue("import java.util.*;\n\nclass Main {\n\n    public static void main(String[] args) {\n        // Your code goes here\n   }\n}\n");
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "java";
	}
	if (modeValue == "20") {
		editor.session.setMode("ace/mode/javascript");
		editor.setValue('process.stdin.resume();\nprocess.stdin.setEncoding(\'ascii\');\n\nvar input_stdin = \"";\nvar input_stdin_array = "";\nvar input_stdin_array = "";\n\nprocess.stdin.on(\'data\', function (data) {\n    input_stdin += data;\n});\n\nprocess.stdin.on(\'en' +
			'd\', function () {\n    input_stdin_array = input_stdin.split("");\n    main();    \n});\n\nfunction readLine() {\n    return input_stdin_array[input_currentline++];\n}\n\n/////////////// ignore above this line ////////////////////\n\nfunction main()' +
		' {\n}\n');
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "javascript";
	}
	if (modeValue == "25") {
		editor.session.setMode("ace/mode/pascal");
		editor.setValue("(* Enter your code here. Read input from STDIN. Print output to STDOUT *)");
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "pascal";
	}
	if (modeValue == "6") {
		editor.session.setMode("ace/mode/perl");
		editor.setValue("#!/usr/bin/perl\n\n$n = <STDIN>;\nchomp $n;\n# your code goes here\n");
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "perl";
	}
	if (modeValue == "7") {
		editor.session.setMode("ace/mode/php");
		editor.setValue('<?php\n\n$handle = fopen ("php://stdin","r");\nfscanf($handle,"%d",$n);\n\n\n# your code goes here\n');
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "php";
	}
	if (modeValue == "5") {
		editor.session.setMode("ace/mode/python");
		editor.setValue('#!/bin/python\nimport sys\n\n\n# your code goes here\n');
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "py";
	}
	if (modeValue == "30") {
		editor.session.setMode("ace/mode/python");
		editor.setValue('#!/bin/python3\nimport sys\n\n# your code goes here\n');
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "py";
	}
	if (modeValue == "8") {
		editor.session.setMode("ace/mode/ruby");
		editor.setValue("#!/bin/ruby\n\n# your code goes here\n");
		editor.clearSelection();
		document.getElementById('langExt').innerHTML = "ruby";
	} else {
		editor.session.setMode("ace/mode/ruby");
		editor.setValue("");
		editor.clearSelection();
	}
}
function changeMode1() {
	var x = document.getElementById("theme");
	var modeValue = x.options[x.selectedIndex].value;
	if (modeValue == "monokai") {
		editor.setTheme("ace/theme/monokai");

	}
	if (modeValue == "dawn") {
		editor.setTheme("ace/theme/dawn");

	}

	if (modeValue == "eclipse") {
		editor.setTheme("ace/theme/eclipse");

	}
	if (modeValue == "merbivore") {
		editor.setTheme("ace/theme/merbivore");

	}
}

$(document).ready(function () {
	$('.selectpicker').selectpicker();
  // $('.selectpicker1').selectpicker1();
  $('[data-toggle="tooltip"]').tooltip();
});
</script>
<!-- <%= response %> -->
<!-- <div class="ace-editor">
<textarea></textarea>
</div> -->
<style media="screen">

.ace {
	position: absolute;
	color: white;
	/*float:right;*/
	background-color: black;
	height: 400px;
	width: 500px;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
}
/*.new{
float:right;
}*/

</style>
<script type="text/javascript">
$(document).ready(function () {
  // initialize all Ace editors on the page.
  $("#editor").each(function (index, item) {
  	initAceEditor(item);
  });
});
var editor = ace.edit("editor");
function initAceEditor(container) {
	$(".but").click(function () {
    $('.result').text("");
		var textarea = $("#source").val();
		$("#source").val(editor.getValue());
		var newText = $('#custominput').val();
		var arr = [];
		arr.push(String(newText));
		$('#custominput').val(JSON.stringify(arr));
		setTimeout(function () {
			$('#custominput').val("");
		}, 1);
    // $('.result').text("<%=%>");
	})
	$(".button").click(function () {
		var textarea = $("#source").val();
		$("#source").val(editor.getValue());
	});
  // container = $(container); var textarea = $(this).find("textarea[name="source"]"); var aceEditorDiv = $('<div>', {"class": "ace"}).insertBefore(textarea); var aceEditor = ace.edit(aceEditorDiv[0]); textarea.closest('form').submit(function () {
  // textarea.val(aceEditor.getValue()); });
}
</script>
<script type='text/javascript'>
$(".button").click(function () {
	var textarea = $("#source").val();
	$("#source").val(editor.getValue());
});
function doDL(s) {
	function dataUrl(data) {
		return "data:x-application/text," + escape(data);
	}
	window.open(dataUrl(s));
}
</script>
</body>
</html>
